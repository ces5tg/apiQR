{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar userService = {\n  apiUrl: 'http://localhost:3000/api/auth',\n  login: function () {\n    var _login = _asyncToGenerator(function* (username, password) {\n      try {\n        var response = yield fetch(`${userService.apiUrl}/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: username,\n            password: password\n          })\n        });\n        var data = yield response.json();\n        yield AsyncStorage.setItem('authToken', data.token);\n        return data.token;\n      } catch (error) {\n        throw new Error('Error al iniciar sesión');\n      }\n    });\n    function login(_x, _x2) {\n      return _login.apply(this, arguments);\n    }\n    return login;\n  }(),\n  register: function () {\n    var _register = _asyncToGenerator(function* (username, password) {\n      try {\n        console.log('Registrando usuario:', username);\n        var response = yield fetch(`${userService.apiUrl}/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: username,\n            password: password\n          })\n        });\n        var data = yield response.json();\n        console.log('Respuesta del servidor:', data);\n        return data;\n      } catch (error) {\n        throw new Error('Error al registrar');\n      }\n    });\n    function register(_x3, _x4) {\n      return _register.apply(this, arguments);\n    }\n    return register;\n  }(),\n  logout: function () {\n    var _logout = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.removeItem('authToken');\n      } catch (error) {\n        throw new Error('Error al cerrar sesión');\n      }\n    });\n    function logout() {\n      return _logout.apply(this, arguments);\n    }\n    return logout;\n  }(),\n  isLoggedIn: function () {\n    var _isLoggedIn = _asyncToGenerator(function* () {\n      try {\n        var token = yield AsyncStorage.getItem('authToken');\n        return !!token;\n      } catch (error) {\n        throw new Error('Error al verificar el estado de inicio de sesión');\n      }\n    });\n    function isLoggedIn() {\n      return _isLoggedIn.apply(this, arguments);\n    }\n    return isLoggedIn;\n  }()\n};\nexport default userService;","map":{"version":3,"names":["AsyncStorage","userService","apiUrl","login","_login","_asyncToGenerator","username","password","response","fetch","method","headers","body","JSON","stringify","data","json","setItem","token","error","Error","_x","_x2","apply","arguments","register","_register","console","log","_x3","_x4","logout","_logout","removeItem","isLoggedIn","_isLoggedIn","getItem"],"sources":["C:/Users/Usuario/Downloads/apiQR-version_1/apiQR-version_1/services/userService.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nconst userService = {\r\n  apiUrl: 'http://localhost:3000/api/auth',\r\n\r\n  login: async (username, password) => {\r\n    try {\r\n      const response = await fetch(`${userService.apiUrl}/login`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n      const data = await response.json();\r\n      await AsyncStorage.setItem('authToken', data.token);\r\n      // Aquí podrías usar un sistema de notificaciones o mensajes para mostrar que el inicio de sesión fue exitoso\r\n      return data.token;\r\n    } catch (error) {\r\n      throw new Error('Error al iniciar sesión');\r\n    }\r\n  },\r\n\r\n  register: async (username, password) => {\r\n    try {\r\n      console.log('Registrando usuario:', username);\r\n      // Realiza la solicitud al servidor para registrar el usuario y guarda la respuesta\r\n      const response = await fetch(`${userService.apiUrl}/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n      const data = await response.json();\r\n      console.log('Respuesta del servidor:', data);\r\n      // Aquí podrías usar un sistema de notificaciones o mensajes para mostrar que el registro fue exitoso\r\n      return data;\r\n    } catch (error) {\r\n      throw new Error('Error al registrar');\r\n    }\r\n  },\r\n\r\n  logout: async () => {\r\n    try {\r\n      await AsyncStorage.removeItem('authToken');\r\n    } catch (error) {\r\n      throw new Error('Error al cerrar sesión');\r\n    }\r\n  },\r\n\r\n  isLoggedIn: async () => {\r\n    try {\r\n      const token = await AsyncStorage.getItem('authToken');\r\n      return !!token;\r\n    } catch (error) {\r\n      throw new Error('Error al verificar el estado de inicio de sesión');\r\n    }\r\n  },\r\n};\r\n\r\nexport default userService;\r\n"],"mappings":";AAAA,OAAOA,YAAY,MAAM,2CAA2C;AAEpE,IAAMC,WAAW,GAAG;EAClBC,MAAM,EAAE,gCAAgC;EAExCC,KAAK;IAAA,IAAAC,MAAA,GAAAC,iBAAA,CAAE,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;MACnC,IAAI;QACF,IAAMC,QAAQ,SAASC,KAAK,CAAE,GAAER,WAAW,CAACC,MAAO,QAAO,EAAE;UAC1DQ,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAER,QAAQ,EAARA,QAAQ;YAAEC,QAAQ,EAARA;UAAS,CAAC;QAC7C,CAAC,CAAC;QACF,IAAMQ,IAAI,SAASP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAClC,MAAMhB,YAAY,CAACiB,OAAO,CAAC,WAAW,EAAEF,IAAI,CAACG,KAAK,CAAC;QAEnD,OAAOH,IAAI,CAACG,KAAK;MACnB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;MAC5C;IACF,CAAC;IAAA,SAAAjB,MAAAkB,EAAA,EAAAC,GAAA;MAAA,OAAAlB,MAAA,CAAAmB,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAArB,KAAA;EAAA;EAEDsB,QAAQ;IAAA,IAAAC,SAAA,GAAArB,iBAAA,CAAE,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;MACtC,IAAI;QACFoB,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEtB,QAAQ,CAAC;QAE7C,IAAME,QAAQ,SAASC,KAAK,CAAE,GAAER,WAAW,CAACC,MAAO,WAAU,EAAE;UAC7DQ,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAER,QAAQ,EAARA,QAAQ;YAAEC,QAAQ,EAARA;UAAS,CAAC;QAC7C,CAAC,CAAC;QACF,IAAMQ,IAAI,SAASP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAClCW,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEb,IAAI,CAAC;QAE5C,OAAOA,IAAI;MACb,CAAC,CAAC,OAAOI,KAAK,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,oBAAoB,CAAC;MACvC;IACF,CAAC;IAAA,SAAAK,SAAAI,GAAA,EAAAC,GAAA;MAAA,OAAAJ,SAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAC,QAAA;EAAA;EAEDM,MAAM;IAAA,IAAAC,OAAA,GAAA3B,iBAAA,CAAE,aAAY;MAClB,IAAI;QACF,MAAML,YAAY,CAACiC,UAAU,CAAC,WAAW,CAAC;MAC5C,CAAC,CAAC,OAAOd,KAAK,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;MAC3C;IACF,CAAC;IAAA,SAAAW,OAAA;MAAA,OAAAC,OAAA,CAAAT,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAO,MAAA;EAAA;EAEDG,UAAU;IAAA,IAAAC,WAAA,GAAA9B,iBAAA,CAAE,aAAY;MACtB,IAAI;QACF,IAAMa,KAAK,SAASlB,YAAY,CAACoC,OAAO,CAAC,WAAW,CAAC;QACrD,OAAO,CAAC,CAAClB,KAAK;MAChB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,kDAAkD,CAAC;MACrE;IACF,CAAC;IAAA,SAAAc,WAAA;MAAA,OAAAC,WAAA,CAAAZ,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAU,UAAA;EAAA;AACH,CAAC;AAED,eAAejC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}